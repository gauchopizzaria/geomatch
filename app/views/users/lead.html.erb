<div class="container mt-5 lead-wrapper" data-controller="confetti">

  <% if @match %>
    <div class="match-popup">
      <h2>ğŸ‰ Deu Match!</h2>

      
      <p>VocÃª e <strong><%= @next_user.display_name %></strong> curtiram um ao outro!</p>
      <p>Deseja iniciar uma conversa agora?</p>

      <div class="match-popup-actions">
        <%= link_to "ğŸ’¬ Conversar Agora", match_path(@match), class: "btn btn-primary" %>
        <%= link_to "â¡ Continuar Vendo UsuÃ¡rios", lead_path, class: "btn btn-outline-secondary" %>
      </div>
    </div>
  <% end %>


  <h1 class="text-center">Descubra Pessoas PrÃ³ximas</h1>

  <% if @next_user %>
    <div class="lead-card">

      <% if @next_user.avatar.attached? %>
        <%= image_tag @next_user.avatar, class: "lead-card-image" %>
      <% end %>

      <div class="lead-card-info">
        <h5 class="card-title"><%= @next_user.display_name %></h5>

        <p class="card-text"><%= @next_user.bio %></p>

        <% if @distance %>
          <p class="card-text"><%= @distance %> km</p>
        <% end %>

        <% if @next_user.hobbies_list.any? %>
          <p class="card-text small">
            Hobbies: <%= @next_user.hobbies_list.join(', ') %>
          </p>
        <% end %>
      </div>
    </div>

    <!-- BotÃµes de AÃ§Ã£o -->
    <div class="lead-actions">

      <!-- Rejeitar: agora com POST real -->
      <%= button_to "âŒ",
            lead_path,
            method: :post,
            class: "action-button reject-button" %>

      <!-- Curtir -->
      <%= button_to "â¤ï¸",
            likes_path(user_id: @next_user.id),
            method: :post,
            class: "action-button like-button",
            id: "like-button" %>

    </div>

  <% else %>
    <div class="alert alert-info text-center" role="alert">
      NÃ£o hÃ¡ mais usuÃ¡rios elegÃ­veis no momento. Tente novamente mais tarde!
    </div>
  <% end %>
</div>
